{"version":3,"file":"LocalForageCache.js","names":["localforage","memoryDriver","setup","configureCache","defineDriver","forageStore","createInstance","driver","INDEXEDDB","LOCALSTORAGE","_driver","name","cache","maxAge","store","exclude","query","invalidate","config","request","clearCacheEntry","removeItem","uuid"],"sources":["../../src/auth/LocalForageCache.js"],"sourcesContent":["/* eslint-disable no-underscore-dangle */\nimport localforage from 'localforage';\nimport memoryDriver from 'localforage-memoryStorageDriver';\nimport { setup } from 'axios-cache-adapter';\n\n/**\n * Async function to configure localforage and setup the cache\n *\n * @returns {Promise} A promise that, when resolved, returns an axios instance configured to\n * use localforage as a cache.\n */\nexport default async function configureCache() {\n  // Register the imported `memoryDriver` to `localforage`\n  await localforage.defineDriver(memoryDriver);\n\n  // Create `localforage` instance\n  const forageStore = localforage.createInstance({\n    // List of drivers used\n    driver: [\n      localforage.INDEXEDDB,\n      localforage.LOCALSTORAGE,\n      memoryDriver._driver,\n    ],\n    name: 'edx-cache',\n  });\n\n  // Set up the cache with a default maxAge of 5 minutes and using localforage as the storage source\n  return setup({\n    cache: {\n      maxAge: 5 * 60 * 1000,\n      store: forageStore,\n      exclude: { query: false },\n      invalidate: async (config, request) => {\n        if (request.clearCacheEntry) {\n          await config.store.removeItem(config.uuid);\n        }\n      },\n    },\n  });\n}\n"],"mappings":";;;;AAAA;AACA,OAAOA,WAAP,MAAwB,aAAxB;AACA,OAAOC,YAAP,MAAyB,iCAAzB;AACA,SAASC,KAAT,QAAsB,qBAAtB;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,wBAA8BC,cAA9B;EAAA;AAAA;;;4EAAe;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA,OAEPH,WAAW,CAACI,YAAZ,CAAyBH,YAAzB,CAFO;;UAAA;YAIb;YACMI,WALO,GAKOL,WAAW,CAACM,cAAZ,CAA2B;cAC7C;cACAC,MAAM,EAAE,CACNP,WAAW,CAACQ,SADN,EAENR,WAAW,CAACS,YAFN,EAGNR,YAAY,CAACS,OAHP,CAFqC;cAO7CC,IAAI,EAAE;YAPuC,CAA3B,CALP,EAeb;;YAfa,kCAgBNT,KAAK,CAAC;cACXU,KAAK,EAAE;gBACLC,MAAM,EAAE,IAAI,EAAJ,GAAS,IADZ;gBAELC,KAAK,EAAET,WAFF;gBAGLU,OAAO,EAAE;kBAAEC,KAAK,EAAE;gBAAT,CAHJ;gBAILC,UAAU;kBAAA,0EAAE,iBAAOC,MAAP,EAAeC,OAAf;oBAAA;sBAAA;wBAAA;0BAAA;4BAAA,KACNA,OAAO,CAACC,eADF;8BAAA;8BAAA;4BAAA;;4BAAA;4BAAA,OAEFF,MAAM,CAACJ,KAAP,CAAaO,UAAb,CAAwBH,MAAM,CAACI,IAA/B,CAFE;;0BAAA;0BAAA;4BAAA;wBAAA;sBAAA;oBAAA;kBAAA,CAAF;;kBAAA;oBAAA;kBAAA;;kBAAA;gBAAA;cAJL;YADI,CAAD,CAhBC;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,C"}