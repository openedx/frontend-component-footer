{"version":3,"file":"injectIntlWithShim.js","names":["React","injectIntl","getLoggingService","intlShape","injectIntlWithShim","WrappedComponent","ShimmedIntlComponent","props","shimmedIntl","Object","create","intl","formatMessage","value","definition","undefined","id","error","Error","process","env","NODE_ENV","console","logError","args","Component","propTypes","isRequired"],"sources":["../../src/i18n/injectIntlWithShim.jsx"],"sourcesContent":["import React from 'react';\nimport { injectIntl } from 'react-intl';\nimport { getLoggingService, intlShape } from './lib';\n\n/**\n * This function wraps react-intl's injectIntl function in order to add error logging to the intl\n * property's formatMessage function.\n *\n * @memberof I18n\n */\nconst injectIntlWithShim = (WrappedComponent) => {\n  class ShimmedIntlComponent extends React.Component {\n    constructor(props) {\n      super(props);\n      this.shimmedIntl = Object.create(this.props.intl, {\n        formatMessage: {\n          value: (definition, ...args) => {\n            if (definition === undefined || definition.id === undefined) {\n              const error = new Error('i18n error: An undefined message was supplied to intl.formatMessage.');\n              if (process.env.NODE_ENV !== 'production') {\n                console.error(error); // eslint-disable-line no-console\n                return '!!! Missing message supplied to intl.formatMessage !!!';\n              }\n              getLoggingService().logError(error);\n              return ''; // Fail silently in production\n            }\n            return this.props.intl.formatMessage(definition, ...args);\n          },\n        },\n      });\n    }\n\n    render() {\n      return <WrappedComponent {...this.props} intl={this.shimmedIntl} />;\n    }\n  }\n\n  ShimmedIntlComponent.propTypes = {\n    intl: intlShape.isRequired,\n  };\n\n  return injectIntl(ShimmedIntlComponent);\n};\n\nexport default injectIntlWithShim;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,YAA3B;AACA,SAASC,iBAAT,EAA4BC,SAA5B,QAA6C,OAA7C;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,gBAAD,EAAsB;EAAA,IACzCC,oBADyC;IAAA;;IAAA;;IAE7C,8BAAYC,KAAZ,EAAmB;MAAA;;MAAA;;MACjB,0BAAMA,KAAN;MACA,MAAKC,WAAL,GAAmBC,MAAM,CAACC,MAAP,CAAc,MAAKH,KAAL,CAAWI,IAAzB,EAA+B;QAChDC,aAAa,EAAE;UACbC,KAAK,EAAE,eAACC,UAAD,EAAyB;YAAA;;YAC9B,IAAIA,UAAU,KAAKC,SAAf,IAA4BD,UAAU,CAACE,EAAX,KAAkBD,SAAlD,EAA6D;cAC3D,IAAME,KAAK,GAAG,IAAIC,KAAJ,CAAU,sEAAV,CAAd;;cACA,IAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;gBACzCC,OAAO,CAACL,KAAR,CAAcA,KAAd,EADyC,CACnB;;gBACtB,OAAO,wDAAP;cACD;;cACDf,iBAAiB,GAAGqB,QAApB,CAA6BN,KAA7B;cACA,OAAO,EAAP,CAP2D,CAOhD;YACZ;;YAT6B,kCAATO,IAAS;cAATA,IAAS;YAAA;;YAU9B,OAAO,0BAAKjB,KAAL,CAAWI,IAAX,EAAgBC,aAAhB,0BAA8BE,UAA9B,SAA6CU,IAA7C,EAAP;UACD;QAZY;MADiC,CAA/B,CAAnB;MAFiB;IAkBlB;;IApB4C;MAAA;MAAA,OAsB7C,kBAAS;QACP,oBAAO,oBAAC,gBAAD,eAAsB,KAAKjB,KAA3B;UAAkC,IAAI,EAAE,KAAKC;QAA7C,GAAP;MACD;IAxB4C;;IAAA;EAAA,EACZR,KAAK,CAACyB,SADM;;EA2B/CnB,oBAAoB,CAACoB,SAArB,GAAiC;IAC/Bf,IAAI,EAAER,SAAS,CAACwB;EADe,CAAjC;EAIA,OAAO1B,UAAU,CAACK,oBAAD,CAAjB;AACD,CAhCD;;AAkCA,eAAeF,kBAAf"}