{"version":3,"file":"AuthenticatedPageRoute.js","names":["React","useContext","PropTypes","useRouteMatch","AppContext","PageRoute","getLoginRedirectUrl","AuthenticatedPageRoute","redirectUrl","props","authenticatedUser","match","path","exact","strict","sensitive","destination","global","location","href","assign","propTypes","string","defaultProps"],"sources":["../../src/react/AuthenticatedPageRoute.jsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { useRouteMatch } from 'react-router-dom';\n\nimport AppContext from './AppContext';\nimport PageRoute from './PageRoute';\nimport { getLoginRedirectUrl } from '../auth';\n\n/**\n * A react-router route that redirects to the login page when the route becomes active and the user\n * is not authenticated.  If the application has been initialized with `requireAuthenticatedUser`\n * false, an authenticatedPageRoute can be used to protect a subset of the application's routes,\n * rather than the entire application.\n *\n * It can optionally accept an override URL to redirect to instead of the login page.\n *\n * Like a `PageRoute`, also calls `sendPageEvent` when the route becomes active.\n *\n * @see PageRoute\n * @see {@link module:frontend-platform/analytics~sendPageEvent}\n * @memberof module:React\n * @param {Object} props\n * @param {string} props.redirectUrl The URL anonymous users should be redirected to, rather than\n * viewing the route's contents.\n */\nexport default function AuthenticatedPageRoute({ redirectUrl, ...props }) {\n  const { authenticatedUser } = useContext(AppContext);\n\n  const match = useRouteMatch({\n    // eslint-disable-next-line react/prop-types\n    path: props.path,\n    // eslint-disable-next-line react/prop-types\n    exact: props.exact,\n    // eslint-disable-next-line react/prop-types\n    strict: props.strict,\n    // eslint-disable-next-line react/prop-types\n    sensitive: props.sensitive,\n  });\n\n  if (authenticatedUser === null) {\n    if (match) {\n      const destination = redirectUrl || getLoginRedirectUrl(global.location.href);\n      global.location.assign(destination);\n    }\n    // This emulates a Route's way of displaying nothing if the route's path doesn't match the\n    // current URL.\n    return null;\n  }\n  return (\n    <PageRoute {...props} />\n  );\n}\n\nAuthenticatedPageRoute.propTypes = {\n  redirectUrl: PropTypes.string,\n};\n\nAuthenticatedPageRoute.defaultProps = {\n  redirectUrl: null,\n};\n"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,aAAT,QAA8B,kBAA9B;AAEA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,SAASC,mBAAT,QAAoC,SAApC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAe,SAASC,sBAAT,OAA2D;EAAA,IAAzBC,WAAyB,QAAzBA,WAAyB;EAAA,IAATC,KAAS;;EACxE,kBAA8BR,UAAU,CAACG,UAAD,CAAxC;EAAA,IAAQM,iBAAR,eAAQA,iBAAR;;EAEA,IAAMC,KAAK,GAAGR,aAAa,CAAC;IAC1B;IACAS,IAAI,EAAEH,KAAK,CAACG,IAFc;IAG1B;IACAC,KAAK,EAAEJ,KAAK,CAACI,KAJa;IAK1B;IACAC,MAAM,EAAEL,KAAK,CAACK,MANY;IAO1B;IACAC,SAAS,EAAEN,KAAK,CAACM;EARS,CAAD,CAA3B;;EAWA,IAAIL,iBAAiB,KAAK,IAA1B,EAAgC;IAC9B,IAAIC,KAAJ,EAAW;MACT,IAAMK,WAAW,GAAGR,WAAW,IAAIF,mBAAmB,CAACW,MAAM,CAACC,QAAP,CAAgBC,IAAjB,CAAtD;MACAF,MAAM,CAACC,QAAP,CAAgBE,MAAhB,CAAuBJ,WAAvB;IACD,CAJ6B,CAK9B;IACA;;;IACA,OAAO,IAAP;EACD;;EACD,oBACE,oBAAC,SAAD,EAAeP,KAAf,CADF;AAGD;AAEDF,sBAAsB,CAACc,SAAvB,GAAmC;EACjCb,WAAW,EAAEN,SAAS,CAACoB;AADU,CAAnC;AAIAf,sBAAsB,CAACgB,YAAvB,GAAsC;EACpCf,WAAW,EAAE;AADuB,CAAtC"}