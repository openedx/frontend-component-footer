{"version":3,"file":"CollapsibleButtonGroup.js","names":["React","useContext","useMemo","useState","PropTypes","MoreVert","useWindowSize","useToggle","DataTableContext","Icon","IconButton","breakpoints","ModalPopup","Stack","Button","ACTION_OVERFLOW_BUTTON_TEXT","SMALL_SCREEN_ACTION_OVERFLOW_BUTTON_TEXT","CollapsibleButtonGroup","className","actions","isOverflowMenuOpen","openOverflowMenu","closeOverflowMenu","overflowMenuTarget","setOverflowMenuTarget","controlledTableSelections","isEntireTableSelected","selectedFlatRows","rows","width","selectedRows","small","minWidth","firstTwoActions","splice","extraActions","slice","reverse","visibleActions","dropdownActions","cloneAction","action","index","cloneElement","component","key","as","args","length","map","defaultProps","propTypes","string","arrayOf","shape","oneOfType","func","element","isRequired"],"sources":["../../src/DataTable/CollapsibleButtonGroup.jsx"],"sourcesContent":["import React, { useContext, useMemo, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { MoreVert } from '../../icons';\nimport {\n  useWindowSize,\n  useToggle,\n  DataTableContext,\n  Icon,\n  IconButton,\n  breakpoints,\n  ModalPopup,\n  Stack,\n  Button,\n} from '..';\n\nexport const ACTION_OVERFLOW_BUTTON_TEXT = 'More actions';\nexport const SMALL_SCREEN_ACTION_OVERFLOW_BUTTON_TEXT = 'Actions';\n\nconst CollapsibleButtonGroup = ({\n  className,\n  actions,\n}) => {\n  const [isOverflowMenuOpen, openOverflowMenu, closeOverflowMenu] = useToggle(false);\n  const [overflowMenuTarget, setOverflowMenuTarget] = useState(null);\n  const {\n    controlledTableSelections: [{ isEntireTableSelected }],\n    selectedFlatRows,\n    rows,\n  } = useContext(DataTableContext);\n  const { width } = useWindowSize();\n  const selectedRows = selectedFlatRows || rows;\n\n  const [visibleActions, dropdownActions] = useMemo(() => {\n    if (width < breakpoints.small.minWidth) {\n      // On a small screen, all actions will be in the overflow menu\n      return [[], [...actions]];\n    }\n    // The first two actions will be displayed as buttons, the rest will go in an overflow menu\n    const firstTwoActions = [...actions].splice(0, 2);\n    const extraActions = [...actions].slice(2);\n\n    /*  Reversing the array because to the user it makes sense to put the primary button first,\n        but we want it on the right */\n    return [firstTwoActions.reverse(), extraActions];\n  }, [actions, width]);\n\n  if (!isEntireTableSelected && !selectedRows) {\n    return null;\n  }\n\n  const cloneAction = (action, index) => React.cloneElement(\n    action.component,\n    {\n      // eslint-disable-next-line react/no-array-index-key\n      key: `${action}${index}`,\n      as: Button, // for backwards compatibility this is needed\n      ...action.args,\n    },\n  );\n\n  return (\n    <div className={className}>\n      {dropdownActions.length > 0 && (\n        <>\n          <IconButton\n            variant=\"secondary\"\n            iconAs={Icon}\n            src={MoreVert}\n            alt={width > breakpoints.small.minWidth\n              ? ACTION_OVERFLOW_BUTTON_TEXT : SMALL_SCREEN_ACTION_OVERFLOW_BUTTON_TEXT}\n            id=\"actions-dropdown\"\n            ref={setOverflowMenuTarget}\n            onClick={openOverflowMenu}\n          />\n          <ModalPopup\n            positionRef={overflowMenuTarget}\n            onClose={closeOverflowMenu}\n            placement=\"bottom-end\"\n            isOpen={isOverflowMenuOpen}\n          >\n            <div className=\"pgn__datatable__overflow-actions-menu\">\n              <Stack gap={2}>\n                {dropdownActions.map(cloneAction)}\n              </Stack>\n            </div>\n          </ModalPopup>\n        </>\n      )}\n      <div className=\"pgn__datatable__visible-actions\">\n        {visibleActions.map(cloneAction)}\n      </div>\n    </div>\n  );\n};\n\nCollapsibleButtonGroup.defaultProps = {\n  className: null,\n};\n\nCollapsibleButtonGroup.propTypes = {\n  /** Class names for the div wrapping the button components */\n  className: PropTypes.string,\n  /** Array of action objects, containing a component and their callback args */\n  actions: PropTypes.arrayOf(PropTypes.shape({\n    component: PropTypes.oneOfType([PropTypes.func, PropTypes.element]).isRequired,\n    args: PropTypes.shape({}),\n  })).isRequired,\n};\n\nexport default CollapsibleButtonGroup;\n"],"mappings":"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"}