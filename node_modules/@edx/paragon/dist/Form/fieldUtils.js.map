{"version":3,"file":"fieldUtils.js","names":["classNames","useState","useEffect","newId","omitUndefinedProperties","obj","Object","entries","reduce","acc","key","value","undefined","callAllHandlers","handlers","unifiedEventHandler","event","filter","handler","forEach","useHasValue","defaultValue","hasUncontrolledValue","setHasUncontrolledValue","hasValue","handleInputEvent","e","target","useIdList","uniqueIdPrefix","initialList","idList","setIdList","addId","idToAdd","oldIdList","getNewId","removeId","idToRemove","id","useRegisteredId","explicitlyRegisteredId","registeredId","setRegisteredId","mergeAttributeValues","values","mergedValues"],"sources":["../../src/Form/fieldUtils.js"],"sourcesContent":["import classNames from 'classnames';\nimport { useState, useEffect } from 'react';\nimport { newId } from '../utils';\n\nconst omitUndefinedProperties = (obj = {}) => Object.entries(obj)\n  .reduce((acc, [key, value]) => {\n    if (value !== undefined) {\n      acc[key] = value;\n    }\n    return acc;\n  }, {});\n\nconst callAllHandlers = (...handlers) => {\n  const unifiedEventHandler = (event) => {\n    handlers\n      .filter(handler => typeof handler === 'function')\n      .forEach(handler => handler(event));\n  };\n  return unifiedEventHandler;\n};\n\nconst useHasValue = ({ defaultValue, value }) => {\n  const [hasUncontrolledValue, setHasUncontrolledValue] = useState(!!defaultValue);\n  const hasValue = !!value || hasUncontrolledValue;\n  const handleInputEvent = (e) => setHasUncontrolledValue(e.target.value);\n  return [hasValue, handleInputEvent];\n};\n\nconst useIdList = (uniqueIdPrefix, initialList) => {\n  const [idList, setIdList] = useState(initialList || []);\n  const addId = (idToAdd) => {\n    setIdList(oldIdList => [...oldIdList, idToAdd]);\n    return idToAdd;\n  };\n  const getNewId = () => {\n    const idToAdd = newId(`${uniqueIdPrefix}-`);\n    return addId(idToAdd);\n  };\n  const removeId = (idToRemove) => {\n    setIdList(oldIdList => oldIdList.filter(id => id !== idToRemove));\n  };\n\n  const useRegisteredId = (explicitlyRegisteredId) => {\n    const [registeredId, setRegisteredId] = useState(explicitlyRegisteredId);\n    useEffect(() => {\n      if (explicitlyRegisteredId) {\n        addId(explicitlyRegisteredId);\n      } else if (!registeredId) {\n        setRegisteredId(getNewId(uniqueIdPrefix));\n      }\n      return () => removeId(registeredId);\n    }, [registeredId, explicitlyRegisteredId]);\n    return registeredId;\n  };\n\n  return [idList, useRegisteredId];\n};\n\nconst mergeAttributeValues = (...values) => {\n  const mergedValues = classNames(values);\n  return mergedValues || undefined;\n};\n\nexport {\n  callAllHandlers,\n  useHasValue,\n  mergeAttributeValues,\n  useIdList,\n  omitUndefinedProperties,\n};\n"],"mappings":"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"}