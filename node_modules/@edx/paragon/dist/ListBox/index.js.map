{"version":3,"file":"index.js","names":["classNames","PropTypes","React","nonNegativeInteger","ListBox","props","onFocus","bind","onKeyDown","state","selectedOptionIndex","setState","e","key","preventDefault","Children","count","children","map","child","index","cloneElement","isSelected","onSelect","className","tag","other","createElement","role","tabIndex","renderChildren","nextProps","prevState","undefined","Component","propTypes","node","isRequired","string","defaultProps"],"sources":["../../src/ListBox/index.jsx"],"sourcesContent":["/* eslint-disable max-len */\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { nonNegativeInteger } from '../utils/propTypes';\n\nexport default class ListBox extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onFocus = this.onFocus.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n\n    this.state = {\n      selectedOptionIndex: null,\n    };\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { selectedOptionIndex } = nextProps;\n\n    if (selectedOptionIndex !== prevState.selectedOptionIndex\n      && selectedOptionIndex !== undefined) {\n      return { selectedOptionIndex };\n    }\n\n    return null;\n  }\n\n  onFocus() {\n    // if no ListBoxOption is selected, select first ListBoxOption on ListBox focus\n    if (!this.state.selectedOptionIndex) {\n      this.setState({\n        selectedOptionIndex: 0,\n      });\n    }\n  }\n\n  onKeyDown(e) {\n    switch (e.key) {\n      case 'ArrowDown': {\n        // prevent scrolling entire modal body with arrow keys\n        e.preventDefault();\n        if (this.state.selectedOptionIndex < React.Children.count(this.props.children) - 1) {\n          this.setState(state => ({\n            selectedOptionIndex: state.selectedOptionIndex + 1,\n          }));\n        }\n        break;\n      }\n      case 'ArrowUp': {\n        // prevent scrolling entire modal body with arrow keys\n        e.preventDefault();\n\n        if (this.state.selectedOptionIndex > 0) {\n          this.setState(state => ({\n            selectedOptionIndex: state.selectedOptionIndex - 1,\n          }));\n        }\n        break;\n      }\n      default:\n    }\n  }\n\n  renderChildren() {\n    return React.Children.map(this.props.children, (child, index) => React.cloneElement(child, {\n      index,\n      isSelected: index === this.state.selectedOptionIndex,\n      onSelect: () => { this.setState({ selectedOptionIndex: index }); child.props.onSelect(); },\n    }));\n  }\n\n  render() {\n    const {\n      children,\n      className,\n      selectedOptionIndex,\n      tag,\n      ...other\n    } = this.props;\n\n    return React.createElement(\n      this.props.tag,\n      {\n        'aria-activedescendant': this.state.selectedOptionIndex === null ? null : `list-box-option-${this.state.selectedOptionIndex}`,\n        className: classNames(['list-group', this.props.className]),\n        onFocus: this.onFocus,\n        onKeyDown: this.onKeyDown,\n        role: 'listbox',\n        tabIndex: 0,\n        ...other,\n      },\n      this.renderChildren(),\n    );\n  }\n}\n\nListBox.propTypes = {\n  /** specifies the ListBoxOption component(s) that will be displayed within the ListBox element. You can pass in one or more ListBoxOption components.\n */\n  children: PropTypes.node.isRequired,\n  /** specifies Bootstrap class names to apply to the ListBox component. The default is an empty string. */\n  className: PropTypes.string,\n  /** Although the ListBox component keeps track of which ListBoxOption is selected, `selectedOptionIndex` provides a mechanism for an override, if necessary. An example would be to clear the selectedOption when moving between views. Note that override is not permanent and that clicking on a ListBoxOption or interacting with the ListBox with the keyboard will change the selected ListBoxOption relative to the original override. The default is undefined. */\n  selectedOptionIndex: nonNegativeInteger,\n  /** used to specify the element type of the rendered ListBox component. The default is div. Example alternatives include ol, ul, span, etc. */\n  tag: PropTypes.string,\n};\n\nListBox.defaultProps = {\n  className: undefined,\n  selectedOptionIndex: undefined,\n  tag: 'div',\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA,OAAOA,UAAP,MAAuB,YAAvB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,kBAAT,QAAmC,oBAAnC;;IAEqBC,O;;;;;EACnB,iBAAYC,KAAZ,EAAmB;IAAA;;IAAA;;IACjB,0BAAMA,KAAN;IAEA,MAAKC,OAAL,GAAe,MAAKA,OAAL,CAAaC,IAAb,+BAAf;IACA,MAAKC,SAAL,GAAiB,MAAKA,SAAL,CAAeD,IAAf,+BAAjB;IAEA,MAAKE,KAAL,GAAa;MACXC,mBAAmB,EAAE;IADV,CAAb;IANiB;EASlB;;;;WAaD,mBAAU;MACR;MACA,IAAI,CAAC,KAAKD,KAAL,CAAWC,mBAAhB,EAAqC;QACnC,KAAKC,QAAL,CAAc;UACZD,mBAAmB,EAAE;QADT,CAAd;MAGD;IACF;;;WAED,mBAAUE,CAAV,EAAa;MACX,QAAQA,CAAC,CAACC,GAAV;QACE,KAAK,WAAL;UAAkB;YAChB;YACAD,CAAC,CAACE,cAAF;;YACA,IAAI,KAAKL,KAAL,CAAWC,mBAAX,GAAiCR,KAAK,CAACa,QAAN,CAAeC,KAAf,CAAqB,KAAKX,KAAL,CAAWY,QAAhC,IAA4C,CAAjF,EAAoF;cAClF,KAAKN,QAAL,CAAc,UAAAF,KAAK;gBAAA,OAAK;kBACtBC,mBAAmB,EAAED,KAAK,CAACC,mBAAN,GAA4B;gBAD3B,CAAL;cAAA,CAAnB;YAGD;;YACD;UACD;;QACD,KAAK,SAAL;UAAgB;YACd;YACAE,CAAC,CAACE,cAAF;;YAEA,IAAI,KAAKL,KAAL,CAAWC,mBAAX,GAAiC,CAArC,EAAwC;cACtC,KAAKC,QAAL,CAAc,UAAAF,KAAK;gBAAA,OAAK;kBACtBC,mBAAmB,EAAED,KAAK,CAACC,mBAAN,GAA4B;gBAD3B,CAAL;cAAA,CAAnB;YAGD;;YACD;UACD;;QACD;MAtBF;IAwBD;;;WAED,0BAAiB;MAAA;;MACf,OAAOR,KAAK,CAACa,QAAN,CAAeG,GAAf,CAAmB,KAAKb,KAAL,CAAWY,QAA9B,EAAwC,UAACE,KAAD,EAAQC,KAAR;QAAA,oBAAkBlB,KAAK,CAACmB,YAAN,CAAmBF,KAAnB,EAA0B;UACzFC,KAAK,EAALA,KADyF;UAEzFE,UAAU,EAAEF,KAAK,KAAK,MAAI,CAACX,KAAL,CAAWC,mBAFwD;UAGzFa,QAAQ,EAAE,oBAAM;YAAE,MAAI,CAACZ,QAAL,CAAc;cAAED,mBAAmB,EAAEU;YAAvB,CAAd;;YAA+CD,KAAK,CAACd,KAAN,CAAYkB,QAAZ;UAAyB;QAHD,CAA1B,CAAlB;MAAA,CAAxC,CAAP;IAKD;;;WAED,kBAAS;MACP,kBAMI,KAAKlB,KANT;MAAA,IACEY,QADF,eACEA,QADF;MAAA,IAEEO,SAFF,eAEEA,SAFF;MAAA,IAGEd,mBAHF,eAGEA,mBAHF;MAAA,IAIEe,GAJF,eAIEA,GAJF;MAAA,IAKKC,KALL;;MAQA,oBAAOxB,KAAK,CAACyB,aAAN,CACL,KAAKtB,KAAL,CAAWoB,GADN;QAGH,yBAAyB,KAAKhB,KAAL,CAAWC,mBAAX,KAAmC,IAAnC,GAA0C,IAA1C,6BAAoE,KAAKD,KAAL,CAAWC,mBAA/E,CAHtB;QAIHc,SAAS,EAAExB,UAAU,CAAC,CAAC,YAAD,EAAe,KAAKK,KAAL,CAAWmB,SAA1B,CAAD,CAJlB;QAKHlB,OAAO,EAAE,KAAKA,OALX;QAMHE,SAAS,EAAE,KAAKA,SANb;QAOHoB,IAAI,EAAE,SAPH;QAQHC,QAAQ,EAAE;MARP,GASAH,KATA,GAWL,KAAKI,cAAL,EAXK,CAAP;IAaD;;;WA7ED,kCAAgCC,SAAhC,EAA2CC,SAA3C,EAAsD;MACpD,IAAQtB,mBAAR,GAAgCqB,SAAhC,CAAQrB,mBAAR;;MAEA,IAAIA,mBAAmB,KAAKsB,SAAS,CAACtB,mBAAlC,IACCA,mBAAmB,KAAKuB,SAD7B,EACwC;QACtC,OAAO;UAAEvB,mBAAmB,EAAnBA;QAAF,CAAP;MACD;;MAED,OAAO,IAAP;IACD;;;;EArBkCR,KAAK,CAACgC,S;;SAAtB9B,O;AA4FrBA,OAAO,CAAC+B,SAAR,GAAoB;EAClB;AACF;EACElB,QAAQ,EAAEhB,SAAS,CAACmC,IAAV,CAAeC,UAHP;;EAIlB;EACAb,SAAS,EAAEvB,SAAS,CAACqC,MALH;;EAMlB;EACA5B,mBAAmB,EAAEP,kBAPH;;EAQlB;EACAsB,GAAG,EAAExB,SAAS,CAACqC;AATG,CAApB;AAYAlC,OAAO,CAACmC,YAAR,GAAuB;EACrBf,SAAS,EAAES,SADU;EAErBvB,mBAAmB,EAAEuB,SAFA;EAGrBR,GAAG,EAAE;AAHgB,CAAvB"}