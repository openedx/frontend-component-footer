{"version":3,"file":"Checkpoint.js","names":["React","useEffect","useState","useMediaQuery","PropTypes","createPopper","breakpoints","CheckpointActionRow","CheckpointBody","CheckpointBreadcrumbs","CheckpointTitle","Checkpoint","forwardRef","ref","body","index","placement","target","title","totalCheckpoints","props","checkpointVisible","setCheckpointVisible","isMobile","maxWidth","small","targetElement","document","querySelector","checkpoint","checkpointPopper","modifiers","name","options","padding","offset","tetherOffset","forceUpdate","targetOffset","getBoundingClientRect","top","bottom","global","innerHeight","includes","scrollTo","behavior","button","focus","isLastCheckpoint","isOnlyCheckpoint","visibility","pointerEvents","defaultProps","advanceButtonText","dismissButtonText","endButtonText","showDismissButton","undefined","propTypes","node","number","isRequired","onAdvance","func","onDismiss","onEnd","oneOf","string","bool"],"sources":["../../src/ProductTour/Checkpoint.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useMediaQuery } from 'react-responsive';\nimport PropTypes from 'prop-types';\nimport { createPopper } from '@popperjs/core';\n\nimport breakpoints from '../utils/breakpoints';\n\nimport CheckpointActionRow from './CheckpointActionRow';\nimport CheckpointBody from './CheckpointBody';\nimport CheckpointBreadcrumbs from './CheckpointBreadcrumbs';\nimport CheckpointTitle from './CheckpointTitle';\n\nconst Checkpoint = React.forwardRef(({\n  body,\n  index,\n  placement,\n  target,\n  title,\n  totalCheckpoints,\n  ...props\n}, ref) => {\n  const [checkpointVisible, setCheckpointVisible] = useState(false);\n  const isMobile = useMediaQuery({ maxWidth: breakpoints.small.maxWidth });\n\n  useEffect(() => {\n    const targetElement = document.querySelector(target);\n    const checkpoint = document.querySelector('#pgn__checkpoint');\n    if (targetElement && checkpoint) {\n      // Use the Popper library to translate the Checkpoint to its target's coordinates\n      const checkpointPopper = createPopper(targetElement, checkpoint, {\n        placement: isMobile ? 'top' : placement,\n        modifiers: [\n          {\n            name: 'arrow',\n            options: {\n              padding: 25,\n            },\n          },\n          {\n            name: 'offset',\n            options: {\n              offset: [0, 20],\n            },\n          },\n          {\n            name: 'preventOverflow',\n            options: {\n              padding: 20,\n              tetherOffset: 35,\n            },\n          },\n        ],\n      });\n      setCheckpointVisible(true);\n      if (checkpointPopper) {\n        checkpointPopper.forceUpdate();\n      }\n    }\n  }, [target, isMobile, placement]);\n\n  useEffect(() => {\n    if (checkpointVisible) {\n      // Scroll the Checkpoint into view once its rendered\n      const targetElement = document.querySelector(target);\n      let targetOffset = targetElement.getBoundingClientRect().top;\n      if ((targetOffset < 0) || (targetElement.getBoundingClientRect().bottom > global.innerHeight)) {\n        if (placement.includes('top')) {\n          if (targetOffset < 0) {\n            targetOffset *= -1;\n          }\n          targetOffset -= 280;\n        } else {\n          targetOffset -= 80;\n        }\n\n        global.scrollTo({\n          top: targetOffset, behavior: 'smooth',\n        });\n      }\n\n      const button = document.querySelector('.pgn__checkpoint-button_advance');\n      button.focus();\n    }\n  }, [target, checkpointVisible, placement]);\n\n  const isLastCheckpoint = index + 1 === totalCheckpoints;\n  const isOnlyCheckpoint = totalCheckpoints === 1;\n\n  return (\n    <div\n      id=\"pgn__checkpoint\"\n      className=\"pgn__checkpoint\"\n      aria-labelledby=\"pgn__checkpoint-title\"\n      ref={ref}\n      role=\"dialog\"\n      style={{ visibility: checkpointVisible ? 'visible' : 'hidden', pointerEvents: checkpointVisible ? 'auto' : 'none' }}\n    >\n      {/* This text is not translated due to Paragon's lack of i18n support */}\n      <span className=\"sr-only\">Top of step {index + 1}</span>\n      {(title || !isOnlyCheckpoint) && (\n        <div className=\"pgn__checkpoint-header\">\n          <CheckpointTitle>{title}</CheckpointTitle>\n          <CheckpointBreadcrumbs currentIndex={index} totalCheckpoints={totalCheckpoints} />\n        </div>\n      )}\n      <CheckpointBody>{body}</CheckpointBody>\n      <CheckpointActionRow\n        isLastCheckpoint={isLastCheckpoint}\n        {...props}\n      />\n      <div id=\"pgn__checkpoint-arrow\" data-popper-arrow />\n      {/* This text is not translated due to Paragon's lack of i18n support */}\n      <span className=\"sr-only\">Bottom of step {index + 1}</span>\n    </div>\n  );\n});\n\nCheckpoint.defaultProps = {\n  advanceButtonText: null,\n  body: null,\n  dismissButtonText: null,\n  endButtonText: null,\n  placement: 'top',\n  title: null,\n  showDismissButton: undefined,\n};\n\nCheckpoint.propTypes = {\n  /** The text displayed on the button used to advance the tour for the given Checkpoint. */\n  advanceButtonText: PropTypes.node,\n  /** The text displayed in the body of the Checkpoint */\n  body: PropTypes.node,\n  /** The text displayed on the button used to dismiss the tour for the given Checkpoint. */\n  dismissButtonText: PropTypes.node,\n  /** The text displayed on the button used to end the tour for the given Checkpoint. */\n  endButtonText: PropTypes.node,\n  /** The current index of the given Checkpoint */\n  index: PropTypes.number.isRequired,\n  /** A function that runs when triggering the `onClick` event of the advance\n   * button for the given Checkpoint. */\n  onAdvance: PropTypes.func.isRequired,\n  /** A function that runs when triggering the `onClick` event of the dismiss\n   * button for the given Checkpoint. */\n  onDismiss: PropTypes.func.isRequired,\n  /** A function that runs when triggering the `onClick` event of the advance\n   * button if the given Checkpoint is the only or last Checkpoint in a tour. */\n  onEnd: PropTypes.func.isRequired,\n  /** A string that dictates the alignment of the Checkpoint around its target. */\n  placement: PropTypes.oneOf([\n    'top', 'top-start', 'top-end', 'right-start', 'right', 'right-end',\n    'left-start', 'left', 'left-end', 'bottom', 'bottom-start', 'bottom-end',\n  ]),\n  /** The CSS selector for the Checkpoint's desired target. */\n  target: PropTypes.string.isRequired,\n  /** The text displayed in the title of the Checkpoint */\n  title: PropTypes.node,\n  /** The total number of Checkpoints in a tour */\n  totalCheckpoints: PropTypes.number.isRequired,\n  /** Enforces visibility of the dismiss button under all circumstances */\n  showDismissButton: PropTypes.bool,\n};\n\nexport default Checkpoint;\n"],"mappings":"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"}