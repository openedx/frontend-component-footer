{"version":3,"file":"index.js","names":["React","PropTypes","CSSTransition","TransitionGroup","classNames","TransitionReplace","props","state","height","onChildEnter","bind","onChildEntering","onChildEntered","onChildExit","onChildExiting","onChildExited","htmlNode","setState","offsetHeight","child","key","process","env","NODE_ENV","console","warn","commonChildStyles","padding","transitionStyles","entering","entered","exiting","position","top","left","right","pointerEvents","exited","enter","enterDuration","exit","exitDuration","transitionClassNames","className","Children","map","children","renderChildTransition","Component","propTypes","element","number","string","func","shape","defaultProps","undefined"],"sources":["../../src/TransitionReplace/index.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\nimport classNames from 'classnames';\n\nclass TransitionReplace extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { height: null };\n\n    this.onChildEnter = this.onChildEnter.bind(this);\n    this.onChildEntering = this.onChildEntering.bind(this);\n    this.onChildEntered = this.onChildEntered.bind(this);\n    this.onChildExit = this.onChildExit.bind(this);\n    this.onChildExiting = this.onChildExiting.bind(this);\n    this.onChildExited = this.onChildExited.bind(this);\n  }\n\n  // Transition events are fired in this order:\n  //\n  // onEnter > onEntering > onEntered\n  // onExit  > onExiting  > onExited\n  //\n  // Keep in mind that we always have two transitions happening\n  // both the entering and leaving children\n  //\n  // We set the container height (for animation) in this order:\n  //\n  // 1. onChildExit         (explicitly set the height to match the current current)\n  // 2. onChildEntering     (set the height to match the new content)\n  // 3. onChildExited       (reset the height to null)\n\n  onChildEnter(htmlNode) {\n    if (this.props.onChildEnter) { this.props.onChildEnter(htmlNode); }\n  }\n\n  onChildEntering(htmlNode) {\n    this.setState({ height: htmlNode.offsetHeight });\n    if (this.props.onChildEntering) { this.props.onChildEntering(htmlNode); }\n  }\n\n  onChildEntered(htmlNode) {\n    this.setState({ height: null });\n    if (this.props.onChildEntered) { this.props.onChildEntered(htmlNode); }\n  }\n\n  onChildExit(htmlNode) {\n    this.setState({ height: htmlNode.offsetHeight });\n    if (this.props.onChildExit) { this.props.onChildExit(htmlNode); }\n  }\n\n  onChildExiting(htmlNode) {\n    if (this.props.onChildExiting) { this.props.onChildExiting(htmlNode); }\n  }\n\n  onChildExited(htmlNode) {\n    this.setState({ height: null });\n    if (this.props.onChildExited) { this.props.onChildExited(htmlNode); }\n  }\n\n  renderChildTransition(child) {\n    if (!child.key && process.env.NODE_ENV === 'development') {\n      // eslint-disable-next-line no-console\n      console.warn(\"TransitionReplace: A child is missing a 'key' prop. Keys are required for any child of this component.\");\n    }\n    // Makes the exiting and entering children occupy the same space\n    // SCSS handles the crossfade so it can be easily overridden\n    const commonChildStyles = {\n      // Prevent margin-collapsing which throws off height calculations\n      padding: '.1px 0',\n    };\n\n    const transitionStyles = {\n      entering: {},\n      entered: {},\n      exiting: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        pointerEvents: 'none',\n      },\n      exited: {},\n    };\n\n    return (\n      <CSSTransition\n        timeout={{\n          enter: this.props.enterDuration,\n          exit: this.props.exitDuration,\n        }}\n        unmountOnExit\n        mountOnEnter\n        onEnter={this.onChildEnter}\n        onEntering={this.onChildEntering}\n        onEntered={this.onChildEntered}\n        onExit={this.onChildExit}\n        onExiting={this.onChildExiting}\n        onExited={this.onChildExited}\n        classNames={this.props.transitionClassNames}\n      >\n        {state => (\n          <div\n            style={{\n              ...commonChildStyles,\n              ...transitionStyles[state],\n              ...this.props.transitionStyles[state],\n            }}\n          >\n            {child}\n          </div>\n        )}\n      </CSSTransition>\n    );\n  }\n\n  render() {\n    return (\n      <TransitionGroup\n        className={classNames(\n          'pgn-transition-replace-group',\n          'position-relative',\n          { 'overflow-hidden': this.state.height !== null },\n          this.props.className,\n        )}\n        style={{ height: this.state.height }}\n      >\n        {React.Children.map(this.props.children, this.renderChildTransition, this)}\n      </TransitionGroup>\n    );\n  }\n}\n\nTransitionReplace.propTypes = {\n  /** Specifies an additional class for the base element */\n  children: PropTypes.element,\n  /** Duration of the element appearance transition. */\n  enterDuration: PropTypes.number,\n  /** Duration of the element dismiss transition. */\n  exitDuration: PropTypes.number,\n  /** Specifies class name to append to the base element. */\n  className: PropTypes.string,\n  /** A `Transition` callback fired immediately after the `enter` or `appear` class is applied. */\n  onChildEnter: PropTypes.func,\n  /** A `Transition` callback fired immediately after the `enter-active` or `appear-active` class is applied. */\n  onChildEntering: PropTypes.func,\n  /**\n   * A `Transition` callback fired immediately after the `enter` or\n   * `appear` classes are removed and the done class is added to the DOM node.\n   */\n  onChildEntered: PropTypes.func,\n  /** A `Transition` callback fired immediately after the `exit` class is applied. */\n  onChildExit: PropTypes.func,\n  /** A `Transition` callback fired immediately after the `exit-active` is applied. */\n  onChildExiting: PropTypes.func,\n  /**\n   * A `Transition` callback fired immediately after the `exit` classes\n   * are removed and the exit-done class is added to the DOM node.\n   */\n  onChildExited: PropTypes.func,\n  /** An object that specifies transition styles. */\n  transitionStyles: PropTypes.shape({\n    entering: PropTypes.shape({}),\n    entered: PropTypes.shape({}),\n    exiting: PropTypes.shape({}),\n    exited: PropTypes.shape({}),\n  }),\n  /** Specifies class name to append to the `Transition`. */\n  transitionClassNames: PropTypes.string,\n};\n\nTransitionReplace.defaultProps = {\n  children: undefined,\n  enterDuration: 300,\n  exitDuration: 300,\n  className: undefined,\n  onChildEnter: undefined,\n  onChildEntering: undefined,\n  onChildEntered: undefined,\n  onChildExit: undefined,\n  onChildExiting: undefined,\n  onChildExited: undefined,\n  transitionStyles: {},\n  transitionClassNames: 'pgn__transition-replace',\n};\n\nexport default TransitionReplace;\n"],"mappings":"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"}