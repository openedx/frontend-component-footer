{"version":3,"file":"index.js","names":["React","PropTypes","classNames","Input","FormControl","propTypes","for","string","isRequired","className","invalid","bool","valid","validMessage","node","invalidMessage","helpText","children","defaultProps","undefined","ValidationFormGroup","props","id","renderChildren","Children","map","child","indexOf","type","cloneElement","Boolean","renderHelpText","text","renderInvalidFeedback","message","renderValidFeedback"],"sources":["../../src/ValidationFormGroup/index.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Input from '../Input';\nimport { FormControl } from '..';\n\nconst propTypes = {\n  /** Id of the form input that the validation is for */\n  for: PropTypes.string.isRequired,\n  /** Additional classnames for this component */\n  className: PropTypes.string,\n  /** Determines if invalid styles / message will be shown */\n  invalid: PropTypes.bool,\n  /** Determines if invalid styles / message will be shown */\n  valid: PropTypes.bool,\n  /** Message to display on valid input */\n  validMessage: PropTypes.node,\n  /** Message to display on invalid input */\n  invalidMessage: PropTypes.node,\n  /** Help text for the form input */\n  helpText: PropTypes.node,\n  children: PropTypes.node,\n};\n\nconst defaultProps = {\n  invalid: undefined,\n  valid: undefined,\n  validMessage: undefined,\n  invalidMessage: undefined,\n  helpText: undefined,\n  children: undefined,\n  className: undefined,\n};\n\nfunction ValidationFormGroup(props) {\n  const {\n    className,\n    invalidMessage,\n    invalid,\n    valid,\n    validMessage,\n    helpText,\n    for: id,\n    children,\n  } = props;\n\n  const renderChildren = () => React.Children.map(children, (child) => {\n    // Any non-user input element should pass through unmodified\n    if (['input', 'textarea', 'select', Input, FormControl].indexOf(child.type) === -1) { return child; }\n\n    // Add validation class names and describedby values to input element\n    return React.cloneElement(child, {\n      className: classNames(child.props.className, {\n        'is-invalid': invalid,\n        'is-valid': valid,\n      }),\n      // This is a non-standard use of the classNames package, but it's exactly the same use case.\n      'aria-describedby': classNames(child.props['aria-describedby'], {\n        [`${id}-help-text`]: Boolean(helpText),\n        [`${id}-invalid-feedback`]: invalid && invalidMessage,\n        [`${id}-valid-feedback`]: valid && validMessage,\n      }),\n    });\n  });\n\n  const renderHelpText = (text) => {\n    if (!text) { return null; }\n    return <small id={`${id}-help-text`} className=\"form-text text-muted\">{text}</small>;\n  };\n\n  /**\n   * The red text conveys semantic emphasis using color and font weight. For WCAG 2.1, the\n   * semantics need to be exposed programmatically as well. To do this, we use <strong/>\n   * elements and attach the formatting classes to them.\n   */\n  const renderInvalidFeedback = (message) => {\n    if (!message) { return null; }\n    return (\n      <strong\n        id={`${id}-invalid-feedback`}\n        className=\"invalid-feedback\"\n      >\n        {message}\n      </strong>\n    );\n  };\n\n  const renderValidFeedback = (message) => {\n    if (!message) { return null; }\n    return (\n      <div\n        className=\"valid-feedback\"\n        id={`${id}-valid-feedback`}\n      >\n        {message}\n      </div>\n    );\n  };\n\n  return (\n    <div className={classNames('form-group', className)}>\n      {renderChildren()}\n      {renderHelpText(helpText)}\n      {renderInvalidFeedback(invalidMessage)}\n      {renderValidFeedback(validMessage)}\n    </div>\n  );\n}\n\nValidationFormGroup.propTypes = propTypes;\nValidationFormGroup.defaultProps = defaultProps;\n\nexport default ValidationFormGroup;\n"],"mappings":"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"}