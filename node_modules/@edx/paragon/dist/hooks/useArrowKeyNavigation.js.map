{"version":3,"file":"useArrowKeyNavigation.js","names":["useRef","useEffect","handleEnter","event","currentIndex","activeElement","click","preventDefault","handleArrowKey","availableElements","focus","nextElement","key","length","handleEvents","parentNode","selectors","includes","document","contains","querySelectorAll","Array","from","findIndex","availableElement","useArrowKeyNavigation","props","eventHandler","current","addEventListener","removeEventListener"],"sources":["../../src/hooks/useArrowKeyNavigation.js"],"sourcesContent":["import { useRef, useEffect } from 'react';\n\n/**\n * A react hook to enable arrow key navigation on a component.\n */\n\nfunction handleEnter({ event, currentIndex, activeElement }) {\n  if (currentIndex === -1) { return; }\n  activeElement.click();\n  event.preventDefault();\n}\n\nfunction handleArrowKey({ event, currentIndex, availableElements }) {\n  // If the focus isn't in the container, focus on the first thing\n  if (currentIndex === -1) { availableElements[0].focus(); }\n\n  // Move the focus up or down. Wrap around ends of list.\n  let nextElement;\n\n  if (event.key === 'ArrowDown' || event.key === 'ArrowRight') {\n    nextElement = availableElements[(currentIndex + 1) % availableElements.length];\n  }\n  if (event.key === 'ArrowUp' || event.key === 'ArrowLeft') {\n    nextElement = currentIndex - 1 < 0\n      ? availableElements[currentIndex - 1 + availableElements.length]\n      : availableElements[currentIndex - 1];\n  }\n  if (event.key === 'End') {\n    nextElement = availableElements[availableElements.length - 1];\n  }\n  if (event.key === 'Home') {\n    [nextElement] = availableElements;\n  }\n\n  // eslint-disable-next-line no-unused-expressions\n  nextElement && nextElement.focus();\n  event.preventDefault();\n}\n\n/**\n * Implement arrow key navigation for the given parentNode\n */\nfunction handleEvents({\n  event,\n  parentNode,\n  selectors = 'a,button,input',\n}) {\n  if (!parentNode) { return; }\n\n  const { key } = event;\n  if (!['ArrowUp', 'ArrowDown', 'ArrowRight', 'ArrowLeft', 'Enter', 'Home', 'End'].includes(key)) {\n    return;\n  }\n\n  const { activeElement } = document;\n\n  // If we're not inside the container, don't do anything\n  if (!parentNode.contains(activeElement)) { return; }\n\n  // Get the list of elements we're allowed to scroll through\n  const availableElements = parentNode.querySelectorAll(selectors);\n\n  // No elements are available to loop through.\n  if (!availableElements.length) { return; }\n\n  // Which index is currently selected\n  const currentIndex = Array.from(availableElements).findIndex(\n    (availableElement) => availableElement === activeElement,\n  );\n\n  if (key === 'Enter') {\n    handleEnter({ event, currentIndex, activeElement });\n  }\n  handleArrowKey({ event, currentIndex, availableElements });\n}\n\nexport default function useArrowKeyNavigation(props) {\n  const { selectors } = props || {};\n  const parentNode = useRef();\n\n  useEffect(() => {\n    const eventHandler = (event) => {\n      handleEvents({ event, parentNode: parentNode.current, selectors });\n    };\n    document.addEventListener('keydown', eventHandler);\n    return () => document.removeEventListener('keydown', eventHandler);\n  }, [selectors]);\n\n  return parentNode;\n}\n"],"mappings":"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"}