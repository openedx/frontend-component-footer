{"version":3,"file":"withDeprecatedProps.js","names":["React","DEPR_TYPES","MOVED","REMOVED","FORMAT","MOVED_AND_FORMAT","withDeprecatedProps","WrappedComponent","componentName","deprecatedProps","WithDeprecatedProps","props","transformProps","bind","message","process","env","NODE_ENV","console","warn","acc","propName","undefined","deprType","newName","expect","transform","Object","keys","reduce","children","transformedProps","Component","displayName"],"sources":["../src/withDeprecatedProps.jsx"],"sourcesContent":["/* eslint no-console: 0 */\nimport React from 'react';\n\nexport const DEPR_TYPES = {\n  MOVED: 'MOVED',\n  REMOVED: 'REMOVED',\n  FORMAT: 'FORMAT',\n  MOVED_AND_FORMAT: 'MOVED_AND_FORMAT',\n};\n\nfunction withDeprecatedProps(WrappedComponent, componentName, deprecatedProps) {\n  class WithDeprecatedProps extends React.Component {\n    constructor(props) {\n      super(props);\n      this.transformProps = this.transformProps.bind(this);\n    }\n\n    warn(message) {\n      if (process.env.NODE_ENV === 'development') {\n        if (console) { console.warn(`[Deprecated] ${message}`); }\n      }\n    }\n\n    transformProps(acc, propName) {\n      if (deprecatedProps[propName] === undefined) {\n        acc[propName] = this.props[propName];\n        return acc;\n      }\n\n      const {\n        deprType,\n        newName,\n        expect,\n        transform,\n        message,\n      } = deprecatedProps[propName];\n\n      switch (deprType) {\n        case DEPR_TYPES.MOVED:\n          this.warn(`${componentName}: The prop '${propName}' has been moved to '${newName}'.`);\n          acc[newName] = this.props[propName];\n          break;\n        case DEPR_TYPES.REMOVED:\n          this.warn(`${componentName}: The prop '${propName}' has been removed. '${message}'`);\n          break;\n        case DEPR_TYPES.FORMAT:\n          if (!expect(this.props[propName])) {\n            this.warn(`${componentName}: The prop '${propName}' expects a new format. ${message}`);\n            acc[propName] = transform(this.props[propName], this.props);\n          } else {\n            acc[propName] = this.props[propName];\n          }\n          break;\n        case DEPR_TYPES.MOVED_AND_FORMAT:\n          this.warn(`${componentName}: The prop '${propName}' has been moved to '${newName}' and expects a new format. ${message}`);\n          acc[newName] = transform(this.props[propName], this.props);\n          break;\n        default:\n          acc[propName] = this.props[propName];\n          break;\n      }\n\n      return acc;\n    }\n\n    render() {\n      const { children, ...transformedProps } = Object\n        .keys(this.props)\n        .reduce(this.transformProps, {});\n\n      return (\n        <WrappedComponent {...transformedProps}>\n          {this.props.children || children /* eslint-disable-line react/prop-types */}\n        </WrappedComponent>\n      );\n    }\n  }\n\n  WithDeprecatedProps.displayName = `withDeprecatedProps(${componentName})`;\n\n  return WithDeprecatedProps;\n}\n\nexport default withDeprecatedProps;\n"],"mappings":"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"}